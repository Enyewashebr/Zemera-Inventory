<section class="stock">
  <div class="header">
    <h2>Stock</h2>
    <p>Current inventory by branch</p>
  </div>

  <!-- Super Manager: Branch selector -->
  <div *ngIf="isSuperManager" class="filters">
    <label>
      Branch
      <select [(ngModel)]="selectedBranchId" (change)="onBranchChange()">
        <option [ngValue]="undefined">Select branch</option>
        <option *ngFor="let b of branches" [ngValue]="b.id">
          {{ b.name }}
        </option>
      </select>
    </label>
  </div>

  <!-- Loading / Error -->
  <p class="loading" *ngIf="loading">Loading stock...</p>
  <p class="error" *ngIf="error">{{ error }}</p>

  <!-- Stock table -->
 <div class="table-wrapper" *ngIf="stocks.length">
  <table>
    <thead>
      <tr>
        <th>Product</th>
        <th>Category</th>
        <th>Subcategory</th>
        <th>Unit</th>
        <th>Quantity</th>
        <th>Status</th>
        <th>Last updated</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let s of stocks">
        <td>{{ s.productName }}</td>
        <td>{{ s.category }}</td>
        <td>{{ s.subcategory }}</td>
        <td>{{ s.unit }}</td>
        <td class="numeric">{{ s.quantity }}</td>
        <td>
          <span class="badge" [ngClass]="stockStatus(s.quantity)">
            {{ stockStatus(s.quantity) }}
          </span>
        </td>
        <td>{{ s.lastUpdated | date:'short' }}</td>
      </tr>
    </tbody>
  </table>
</div>


  <p *ngIf="!loading && !stocks.length" class="empty">
    No stock data available
  </p>
</section>
